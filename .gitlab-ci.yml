stages:
    - test

.test:
    stage: test
    before_script:
        - pip install -e ".[test]"
    script:
        - pytest --cov=kong
        - coverage html
    artifacts:
        paths:
            - htmlcov

format:
    image: python:3.7
    before_script:
        - pip install -e ".[test]"
    script:
        - black --check kong

python-latest:
    extends: .test
    image: python:latest

python3.7:
    extends: .test
    image: python:3.7

python3.6:
    extends: .test
    image: python:3.6

python3.5:
    extends: .test
    image: python:3.5

python3.4:
    extends: .test
    image: python:3.4
